<!DOCTYPE HTML>
<html lang="en">
<head>
  <meta charset="UTF-8">

  <meta name="viewport" content="width=device-width,
      user-scalable=no, initial-scale=1, maximum-scale=1, user-scalable=0" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <style type="text/css">
    body { margin: 0; padding: 0; background: #000;}
    canvas { display: block; margin: 0 auto; background: #fff; }
  </style>

  <script src="/socket.io/socket.io.js"></script>
  <script src="//davidshimjs.github.com/qrcodejs/qrcode.min.js"></script>
  <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>

</head>

<body>

<canvas> </canvas>
<script>
// namespace our game
var POP = {

    // set up some initial values
    WIDTH: 320,
    HEIGHT:  480,
    // we'll set the rest of these
    // in the init function
    RATIO:  null,
    currentWidth:  null,
    currentHeight:  null,
    canvas: null,
    ctx:  null,

    init: function() {

        // the proportion of width to height
        POP.RATIO = POP.WIDTH / POP.HEIGHT;
        // these will change when the screen is resized
        POP.currentWidth = POP.WIDTH;
        POP.currentHeight = POP.HEIGHT;
        // this is our canvas element
        POP.canvas = document.getElementsByTagName('canvas')[0];
        // setting this is important
        // otherwise the browser will
        // default to 320 x 200
        POP.canvas.width = POP.WIDTH;
        POP.canvas.height = POP.HEIGHT;
        // the canvas context enables us to
        // interact with the canvas api
        POP.ctx = POP.canvas.getContext('2d');

        // we're ready to resize
        POP.resize();

        // include this at the end of POP.init function
        POP.Draw.clear();
        POP.Draw.rect(120,120,150,150, 'green');
        POP.Draw.circle(100, 100, 50, 'rgba(255,0,0,0.5)');
        POP.Draw.text('Hello World', 100, 100, 10, '#000');

    },

    resize: function() {//

        POP.currentHeight = window.innerHeight;
        // resize the width in proportion
        // to the new height
        POP.currentWidth = POP.currentHeight * POP.RATIO;

        // this will create some extra space on the
        // page, allowing us to scroll past
        // the address bar, thus hiding it.
        if (POP.android || POP.ios) {
            document.body.style.height = (window.innerHeight + 50) + 'px';
        }

        // set the new canvas style width and height
        // note: our canvas is still 320 x 480, but
        // we're essentially scaling it with CSS
        POP.canvas.style.width = POP.currentWidth + 'px';
        POP.canvas.style.height = POP.currentHeight + 'px';

        // we use a timeout here because some mobile
        // browsers don't fire if there is not
        // a short delay
        window.setTimeout(function() {
                window.scrollTo(0,1);
        }, 1);
    }

};

// abstracts various canvas operations into
// standalone functions
POP.Draw = {

    clear: function() {
        POP.ctx.clearRect(0, 0, POP.WIDTH, POP.HEIGHT);
    },

    rect: function(x, y, w, h, col) {
        POP.ctx.fillStyle = col;
        POP.ctx.fillRect(x, y, w, h);
    },

    circle: function(x, y, r, col) {
        POP.ctx.fillStyle = col;
        POP.ctx.beginPath();
        POP.ctx.arc(x + 5, y + 5, r, 0,  Math.PI * 2, true);
        POP.ctx.closePath();
        POP.ctx.fill();
    },

    text: function(string, x, y, size, col) {
        POP.ctx.font = 'bold '+size+'px Monospace';
        POP.ctx.fillStyle = col;
        POP.ctx.fillText(string, x, y);
    }

};

window.addEventListener('load', POP.init, false);
window.addEventListener('resize', POP.resize, false);
</script>

</body>
</html>

<!DOCTYPE html>
<!--
<html>
  <head>
    <title> Smartphone Controller </title>
  	<script src="/socket.io/socket.io.js"></script>
    <script src="//davidshimjs.github.com/qrcodejs/qrcode.min.js"></script>
    <script src="https://code.createjs.com/createjs-2015.11.26.min.js"></script>
  </head>

  <body>
    <p> CONTROLLER </p>
    <button onclick='sendLeftCommand();' class='load-image'> GO LEFT </button>
    <button onclick='sendRightCommand();' class='load-image'> GO RIGHT </button>

    <script>
    var io = io.connect();

    if (window.location.href.indexOf('?id=') > 0) {
      var game_ID = window.location.href.split('?id=')[1];

      io.emit('controller_connect', game_ID);
      io.on('controller_connected', function(data) {
        console.log("Connected successfully to the game, " + game_ID);
      });

      function sendRightCommand() {io.emit("move_right", game_ID);}
      function sendLeftCommand() {io.emit("move_left", game_ID);}
    } else {
      console.log("No game ID sent")
    }
      </script>
  </body>
</html>

-->
